/* 
------------------------------------------
  Oops.js, By : Pedro Jos√© Manuel, 2021
  www.github.com/pedro-jmanuel/oops
------------------------------------------
*/
function Oops(a){var c=this;var d={defaultConfig:{storage:"localStorage",key:"oops_key"},config:{}};
var b={isUndefined:function(e){return e===undefined||e===null;},isDefined:function(e){return e!==undefined&&e!==null;
},def:function(g,f,h,e){Object.defineProperty(g,f,{value:h,enumerable:!!e,writable:true,configurable:true});
},merge:function(g){var e={};for(var f in d.defaultConfig){if(d.defaultConfig.hasOwnProperty(f)){if(g.hasOwnProperty(f)){b.def(e,f,g[f],true);
}else{b.def(e,f,d.defaultConfig[f],true);}}}return e;},storageAvailable:function(h){var g;
try{g=window[h];var i="__storage_test__";g.setItem(i,i);g.removeItem(i);return true;
}catch(f){return f instanceof DOMException&&(f.code===22||f.code===1014||f.name==="QuotaExceededError"||f.name==="NS_ERROR_DOM_QUOTA_REACHED")&&(g&&g.length!==0);
}},storageSetItems:function(e){switch(d.config.storage){case"localStorage":localStorage.setItem(d.config.key,JSON.stringify(e));
break;case"sessionStorage":sessionStorage.setItem(d.config.key,JSON.stringify(e));
break;}},storageGetItems:function(){switch(d.config.storage){case"localStorage":return JSON.parse(localStorage.getItem(d.config.key));
case"sessionStorage":return JSON.parse(sessionStorage.getItem(d.config.key));}},isset:function(){return(b.isDefined(sessionStorage.getItem(d.config.key))||b.isDefined(localStorage.getItem(d.config.key)));
},prepare:function(e){var f={};e.forEach(function(h,g){if("type" in h){b.def(f,g,h.value,true);
}});b.def(f,"selected",e.length,true);return f;},noError:function(e){if(e=="localStorage"||e=="sessionStorage"){if(b.storageAvailable(e)){return true;
}else{console.warn("oops.js warn: "+e+" is not available.");return false;}}else{console.error('oops.js error: The "storage" property can only be "localStorage" or "sessionStorage", check your configuration parameter.');
return false;}},track:function(){var e=document.querySelectorAll("[data-oops]");e.forEach(function(f){var g=["text","textarea","url","search","number"];
if("type" in f){if(g.indexOf(f.type)!=-1){f.addEventListener("input",function(){formValues=b.prepare(e);
b.storageSetItems(formValues);});}else{if(f.type=="number"){f.addEventListener("change",function(){formValues=b.prepare(e);
b.storageSetItems(formValues);});}else{f.addEventListener("change",function(){formValues=b.prepare(e);
b.storageSetItems(formValues);});}}}});},fill:function(){var e=document.querySelectorAll("[data-oops]");
var f=b.storageGetItems();if(e.length!=f.selected){c.clear();}else{e.forEach(function(g,h){if(("type" in g)&&(h in f)){g.value=f[h];
}});}}};d.config=(b.isUndefined(a))?d.defaultConfig:b.merge(a);this.start=function(){stg=d.config.storage;
if(b.noError(stg)){if(b.isset()){b.fill();b.track();}else{b.track();}}};this.clear=function(){stg=d.config.storage;
if(b.noError(stg)){switch(d.config.storage){case"localStorage":localStorage.removeItem(d.config.key);
break;case"sessionStorage":sessionStorage.removeItem(d.config.key);break;}}};}